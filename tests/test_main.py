# from diglife.core import get_score, score_from_memory_card, memory_card_polish


# def test_score():
#     S = [10,9,4,2,1,5]
#     result = get_score(S,K = 0.8)
#     print(result)


# def test_score_from_memory_card():
#     memory_card = """
#  {'title': '童年惊魂',
#   'content': '我记得在我小的时候，大概是在我三四年级的时候，我和我的小伙伴一块去上山抓蝎子。小时候那会儿都比较皮，到处跑。我在山上去翻蝎子的时候，遇到了一条蛇！我和它对视过后，我就慌忙地转身逃跑。在我刚转身逃跑的时候，我看见山上的小路上有一个树枝倒下来了，倒在我的前面，然后我就跳了起来。在我跳起来的时候，那条蛇就在我的脚底下钻过去了，当时真的吓得我很害怕。如果不是那个树枝的话，我可能就被咬了。而且那条蛇，我记得它是三角脑袋，枯草色的，看着像是有毒的样子。之后我对山上有些阴影了，都不怎么去上山抓蝎子了。我现在上山还是会拿根棍子，到处敲一敲！说实话，真的有阴影。'},
# """
#     result = score_from_memory_card(memory_card)
#     print(result)


# def test_memory_card_polish():
#     memory_card = """
#  {'title': '童年惊魂',
#   'content': '我记得在我小的时候，大概是在我三四年级的时候，我和我的小伙伴一块去上山抓蝎子。小时候那会儿都比较皮，到处跑。我在山上去翻蝎子的时候，遇到了一条蛇！我和它对视过后，我就慌忙地转身逃跑。在我刚转身逃跑的时候，我看见山上的小路上有一个树枝倒下来了，倒在我的前面，然后我就跳了起来。在我跳起来的时候，那条蛇就在我的脚底下钻过去了，当时真的吓得我很害怕。如果不是那个树枝的话，我可能就被咬了。而且那条蛇，我记得它是三角脑袋，枯草色的，看着像是有毒的样子。之后我对山上有些阴影了，都不怎么去上山抓蝎子了。我现在上山还是会拿根棍子，到处敲一敲！说实话，真的有阴影。'},
# """
#     result = memory_card_polish(memory_card)
#     print(result)

# from diglife.core import extract_person_name

# def test_extract_person_name():
#     bio_chunk = """

# """
#     result = extract_person_name(bio_chunk)
#     print(result)


# from diglife.core import extract_person_name, extract_person_place

# def test_extract_person_name():
#     bio_chunk = """
# ## 第五章 县城初中：混乱中的坚韧
# 小学时，我曾是班里的第一名，甚至在整个学校五六个年级中，我的成绩也名列前茅。那时的我，能够全身心地投入学习，没有太多杂念。然而，进入初中，环境却发生了翻天覆地的变化。我上的初中叫镇南初中，是我们县的第二初级中学。初二升初三时，学校与县里的第一初级中学合并，搬到了一个新建的校区。
# 新校区虽然是新建的，但环境远不如想象中那么完善，甚至可以说有些混乱。操场还是土的，没有铺设；一些下水管道和电线还没埋到地下，路上随处可见大沟。我清楚地记得，有一天晚上我们下晚自习，班里一个同学就因为路上太黑，加上有施工的坑，不小心掉了下去，胳膊当场就摔骨折了。这样的环境，无疑给原本就躁动的青春期增添了更多不安定的因素。
# 县城初中的生活，用“混乱”二字来形容，再贴切不过。几乎每周都会发生打架事件，而每两周，甚至会爆发一次群架。校园里弥漫着一股紧张而又野蛮的气息，许多同学在这种环境下逐渐迷失，最终选择了中途辍学。我亲眼看着身边的同学一个个离开，他们或是被卷入无休止的冲突，或是对学业彻底失去了兴趣。
# 面对这样的环境，我并没有选择随波逐流。虽然也曾参与过一些打架事件，甚至有一次头部被餐盘砸伤，但这并没有影响我对学业的坚持。我深知学习是我唯一的出路，也是我能掌控自己未来的关键。小学时养成的专注学习的习惯，在这里发挥了巨大的作用。即便周围充斥着喧嚣和冲突，我依然能够保持对知识的渴望，将大部分精力投入到学习中。我的成绩始终保持在班级名列前茅，甚至在全校也位居前十。这让许多同学家长都向他们的孩子提起我，甚至会向我请教学习方法。
# 在这混乱之中，我学会了如何生存，也学会了如何保护自己。我与几个要好的朋友组成了小团体。我们彼此扶持，共同面对校园里的各种挑战，形成了一种“团结对外”的默契。我的一个好友，就因为卷入打架事件，最终被父母领回沈阳。即便如此，我们之间的友谊也未曾中断，直到现在我们依然保持着联系，前段时间他还邀请我当他的伴郎。这段经历让我认识到，在逆境中，友谊和团结的力量是多么重要。
# 初中这段经历，对我性格的塑造产生了深远的影响。它让我过早地接触到了社会复杂的一面，也让我认识到自己身上“意气用事”的一面。在那个年纪，面对不公或挑衅，我常常会冲动行事。这种“意气用事”的特质，在后来的很长一段时间里都伴随着我。直到上大学，我才慢慢意识到这个问题，并逐渐开始修正。我不太清楚具体是怎么改的，就是逐渐地、慢慢地意识到了问题，然后慢慢地就改过来了。现在的我，在面对问题时，会更加理智地去判断。
# 回首那段岁月，我为自己能够坚持到毕业而感到庆幸。在许多同学中途辍学的大背景下，其中就包括我的朋友张望,
# 我的坚持，不仅是对学业的执着，更是对未来的一种信念。这段混乱而又充满挑战的初中生活，磨砺了我的意志，锻炼了我的环境适应能力，也奠定了我坚韧的性格底色。它让我明白，无论身处何种困境，只要心中有目标，并为之不懈努力，便能找到属于自己的出路。
# """
#     result = extract_person_name(bio_chunk)
#     print(result)

# def test_extract_person_place():
#     bio_chunk = """
# ## 第五章 县城初中：混乱中的坚韧
# 小学时，我曾是班里的第一名，甚至在整个学校五六个年级中，我的成绩也名列前茅。那时的我，能够全身心地投入学习，没有太多杂念。然而，进入初中，环境却发生了翻天覆地的变化。我上的初中叫镇南初中，是我们县的第二初级中学。初二升初三时，学校与县里的第一初级中学合并，搬到了一个新建的校区。
# 新校区虽然是新建的，但环境远不如想象中那么完善，甚至可以说有些混乱。操场还是土的，没有铺设；一些下水管道和电线还没埋到地下，路上随处可见大沟。我清楚地记得，有一天晚上我们下晚自习，班里一个同学就因为路上太黑，加上有施工的坑，不小心掉了下去，胳膊当场就摔骨折了。这样的环境，无疑给原本就躁动的青春期增添了更多不安定的因素。
# 县城初中的生活，用“混乱”二字来形容，再贴切不过。几乎每周都会发生打架事件，而每两周，甚至会爆发一次群架。校园里弥漫着一股紧张而又野蛮的气息，许多同学在这种环境下逐渐迷失，最终选择了中途辍学。我亲眼看着身边的同学一个个离开，他们或是被卷入无休止的冲突，或是对学业彻底失去了兴趣。
# 面对这样的环境，我并没有选择随波逐流。虽然也曾参与过一些打架事件，甚至有一次头部被餐盘砸伤，但这并没有影响我对学业的坚持。我深知学习是我唯一的出路，也是我能掌控自己未来的关键。小学时养成的专注学习的习惯，在这里发挥了巨大的作用。即便周围充斥着喧嚣和冲突，我依然能够保持对知识的渴望，将大部分精力投入到学习中。我的成绩始终保持在班级名列前茅，甚至在全校也位居前十。这让许多同学家长都向他们的孩子提起我，甚至会向我请教学习方法。
# 在这混乱之中，我学会了如何生存，也学会了如何保护自己。我与几个要好的朋友组成了小团体。我们彼此扶持，共同面对校园里的各种挑战，形成了一种“团结对外”的默契。我的一个好友，就因为卷入打架事件，最终被父母领回沈阳。即便如此，我们之间的友谊也未曾中断，直到现在我们依然保持着联系，前段时间他还邀请我当他的伴郎。这段经历让我认识到，在逆境中，友谊和团结的力量是多么重要。
# 初中这段经历，对我性格的塑造产生了深远的影响。它让我过早地接触到了社会复杂的一面，也让我认识到自己身上“意气用事”的一面。在那个年纪，面对不公或挑衅，我常常会冲动行事。这种“意气用事”的特质，在后来的很长一段时间里都伴随着我。直到上大学，我才慢慢意识到这个问题，并逐渐开始修正。我不太清楚具体是怎么改的，就是逐渐地、慢慢地意识到了问题，然后慢慢地就改过来了。现在的我，在面对问题时，会更加理智地去判断。
# 回首那段岁月，我为自己能够坚持到毕业而感到庆幸。在许多同学中途辍学的大背景下，其中就包括我的朋友张望,
# 我的坚持，不仅是对学业的执着，更是对未来的一种信念。这段混乱而又充满挑战的初中生活，磨砺了我的意志，锻炼了我的环境适应能力，也奠定了我坚韧的性格底色。它让我明白，无论身处何种困境，只要心中有目标，并为之不懈努力，便能找到属于自己的出路。
# """
#     result = extract_person_place(bio_chunk)
#     print(result)

import pytest
import requests

# 定义 API 的基础 URL
BASE_URL = "http://localhost:8107"

def test_get_data_success():
    """
    测试 GET /data 接口是否成功返回预期的 JSON 数据和状态码。
    """
    endpoint = f"{BASE_URL}/"
    response = requests.get(endpoint)

    # 断言状态码
    assert response.status_code == 200, f"Expected status code 200, but got {response.status_code}"

    # 断言响应体内容
    # assert response.json() == {"message": "Hello, API!"}, \
    #     f"Expected response body {{'message': 'Hello, API!'}}, but got {response.json()}"

def test_get_nonexistent_endpoint():
    """
    测试访问不存在的端点是否返回 404。
    """
    endpoint = f"{BASE_URL}/nonexistent"
    response = requests.get(endpoint)

    assert response.status_code == 404, f"Expected status code 404, but got {response.status_code}"
